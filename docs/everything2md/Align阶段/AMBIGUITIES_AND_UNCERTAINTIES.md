# Everything2MD 歧义和不确定性识别

## 结构化问题清单

### 1. 功能需求相关问题

#### 1.1 批量处理功能

**问题描述**：现有文档提到了批量处理功能，但未详细说明具体需求
**优先级**：高
**需要澄清的内容**：

- 是否需要支持递归子目录处理？  是
- 输出目录结构如何组织？（保持原目录结构 vs 扁平化）提供选择开关
- 是否需要提供处理进度显示？需要
- 失败文件如何处理？（跳过 vs 停止 vs 继续并记录）跳过并记录。已经处理过的文件也是，举个例子：转化docx文档时，输出路径如果有同名的md文件，就认为该docx文件已经处理过了，就跳过并记录即可
- 是否需要生成处理报告？需要

#### 1.2 配置系统需求

**问题描述**：关于配置系统的具体需求不够明确
**优先级**：高
**需要澄清的内容**：

- **需要支持哪些具体的配置选项？**  
  建议覆盖：  
  - 输入/输出路径  
  - 递归深度与目录结构保持开关  
  - 并发数与内存上限  
  - 日志级别与日志文件位置  
  - 组件（LibreOffice、Pandoc、pptx2md）可执行文件路径  
  - 重试次数与超时时间  
  - 质量阈值与缓存开关

- **配置的优先级顺序？**  
  采用业界惯用顺序：  
  命令行参数 > 配置文件 > 环境变量 > 内置默认值  
  同一键值以高优先级来源为准，低优先级不覆盖。

- **偏好的配置文件格式？**  
  优先 JSON（易读写、生态成熟）；  
  预留 YAML 解析接口，未来可按需开启；  
  不引入 INI，减少维护成本。

- **是否需要支持配置文件的验证机制？**  
  需要。  
  采用 JSON Schema 做静态校验，启动即检查字段类型、取值范围、依赖关系；  
  校验失败给出行号+原因，拒绝启动，防止运行时诡异错误。

#### 1.3 错误处理机制

**问题描述**：错误处理的具体需求和边界情况处理不够详细
**优先级**：中
**需要澄清的内容**：

- 对于转换失败的文件，是否需要提供详细的错误报告？  是
- 是否需要支持断点续传功能？  是
- 如何处理权限不足的情况？  拒绝执行
- 是否需要支持日志级别设置？  是

### 2. 技术实现相关问题

#### 2.1 性能优化方向

**问题描述**：性能优化的具体需求和边界不够明确
**优先级**：中
**需要澄清的内容**：

- 对于大文件处理，是否有具体的内存使用限制？  是，默认1GB内存，可通过配置文件修改
- 是否需要支持并发处理？如果是，并发数如何确定？  是，默认4个并发线程，可通过配置文件修改
- 是否需要实现缓存机制避免重复处理？  是，默认开启缓存，可通过配置文件关闭
- 是否需要支持处理进度的实时反馈？  是，默认开启进度反馈，可通过配置文件关闭

#### 2.2 组件版本兼容性

**问题描述**：组件版本的兼容性策略需要进一步明确
**优先级**：中
**需要澄清的内容**：

- 对于 LibreOffice、Pandoc、pptx2md 的最低版本要求是否可以调整？  是，默认要求最低版本，可通过配置文件修改
- 是否需要支持不同版本的降级处理？  是，默认支持不同版本，可通过配置文件关闭
- 如何处理组件更新后的兼容性问题？  建议用户手动更新组件，或联系项目维护者获取帮助

#### 2.3 跨平台支持细节

**问题描述**：不同平台上的具体支持细节需要明确
**优先级**：中
**需要澄清的内容**：

- Windows 平台支持是否仅限于 WSL 和 Git Bash？  是，默认仅支持WSL和Git Bash，可通过配置文件修改
- 不同 Linux 发行版的兼容性如何保证？  建议用户手动安装组件，或联系项目维护者获取帮助
- macOS 不同版本的兼容性如何处理？  建议用户手动安装组件，或联系项目维护者获取帮助

### 3. 用户体验相关问题

#### 3.1 命令行界面设计

**问题描述**：命令行界面的具体设计和选项需要进一步明确
**优先级**：高  
**需要澄清的内容**：

- 命令行参数的具体命名和使用方式？  建议采用短横线（-）作为参数前缀，长横线（--）作为长参数前缀。例如：-i 输入路径，--output 输出路径
- 是否需要支持简写参数？  是，建议支持简写参数，例如：-i 输入路径，-o 输出路径
- 默认行为是什么？（输出到标准输出 vs 同名文件）  默认输出到标准输出，可通过配置文件修改
- 是否需要支持管道输入？  是，建议支持管道输入，例如：cat input.docx | everything2md -o output.md

#### 3.2 帮助信息和文档

**问题描述**：帮助信息和文档的具体需求不够明确
**优先级**：中
**需要澄清的内容**：

- 帮助信息的详细程度如何？  建议提供详细的帮助信息，包括参数说明、使用示例、错误处理建议等
- 是否需要提供使用示例？  是，建议提供使用示例，帮助用户快速上手
- 是否需要支持在线帮助文档？  否，建议用户通过命令行参数或配置文件获取帮助

### 4. 质量保证相关问题

#### 4.1 测试覆盖范围

**问题描述**：测试的具体覆盖范围和质量标准需要明确
**优先级**：中
**需要澄清的内容**：

- 单元测试的覆盖率要求是多少？  建议达到80%以上
- 是否需要支持集成测试？  是，建议支持集成测试，确保组件之间的协同工作正常
- 是否需要性能基准测试？  暂不进行
- 如何处理不同组件版本的测试？暂不进行

#### 4.2 输出质量验证

**问题描述**：输出质量的验证标准需要进一步明确
**优先级**：中
**需要澄清的内容**：

- 转换质量如何量化评估？ 暂不进行
- 是否需要支持质量阈值设置？  暂不进行
- 如何处理质量不达标的文件？  暂不进行

## 需要决策的关键点

### 1. 批量处理实现方式

**选项**：

1. 简单的文件列表处理
2. 支持目录递归和结构保持
3. 高级功能（并发、进度、断点续传）

**建议**：基于项目当前状态，建议采用选项2，为未来扩展保留接口。
采用选项2，为未来扩展保留接口

### 2. 配置系统实现方式

**选项**：

1. 简单的环境变量支持
2. 完整的配置文件系统（支持多种格式）
3. 高级配置管理（支持验证、模板等）

**建议**：基于项目当前状态，建议采用选项2，支持JSON格式配置文件。
支持JSON格式配置文件

### 3. 错误处理策略

**选项**：

1. 简单的错误报告和退出
2. 详细的错误分类和处理建议
3. 高级错误恢复机制（断点续传、重试等）

**建议**：基于项目当前状态，建议采用选项2，提供详细的错误信息和处理建议。
提供详细的错误信息和处理建议

## 建议的澄清优先级

### 高优先级（需要立即澄清）

1. 批量处理功能的具体需求
2. 配置系统的具体需求
3. 命令行界面设计

### 中优先级（可以在后续阶段澄清）

1. 性能优化的具体需求
2. 错误处理的详细需求
3. 跨平台支持细节

### 低优先级（可以基于最佳实践决策）

1. 组件版本兼容性策略
2. 测试覆盖范围
3. 输出质量验证标准